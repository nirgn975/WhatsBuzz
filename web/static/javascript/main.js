"use strict";function checkLoginState(){FB.getLoginStatus(function(e){statusChangeCallback(e)})}function statusChangeCallback(e){"connected"===e.status?getPermissions():"not_authorized"===e.status?document.getElementById("status").innerHTML="Please log into this app.":document.getElementById("status").innerHTML="Please log into Facebook."}function getPermissions(){var e=$(".loginBtn--facebook").data();$(".loader").append($("<img>").attr("src","/static/images/spinner.svg").css("animation","spin 5.250s infinite ease").css("margin","25px").css("width","30%")),$(".loader").delay(5e3).fadeOut(250),setTimeout(function(){$("#FB-image-game").show(),$.map(e,function(e,t){"full_user_name"===t&&getUserFullName(),"first_user_name"===t&&getUserFirstName(),"last_user_name"===t&&getUserLastName(),"profile_image"===t&&getUserProfileImage()})},5250)}function getUserFullName(){var e=$("#facebooklogin").data("post");$.get("/posts/get_data/user_name/"+e,function(e){FB.api("/me",{fields:"name"},function(t){if(t&&!t.error){var a=$("<p>").attr("id","FB-text-game").css("left",e[0].x).css("top",e[0].y).text(t.name);$("#description").append(a)}})})}function getUserFirstName(){var e=$("#facebooklogin").data("post");$.get("/posts/get_data/user_name/"+e,function(e){FB.api("/me",{fields:"first_name"},function(t){if(t&&!t.error){var a=$("<p>").attr("id","FB-text-game").css("left",e[0].x).css("top",e[0].y).text(t.first_name);$("#description").append(a)}})})}function getUserLastName(){var e=$("#facebooklogin").data("post");$.get("/posts/get_data/user_name/"+e,function(e){FB.api("/me",{fields:"last_name"},function(t){if(t&&!t.error){var a=$("<p>").attr("id","FB-text-game").css("left",e[0].x).css("top",e[0].y).text(t.last_name);$("#description").append(a)}})})}function getUserProfileImage(){var e=$("#facebooklogin").data("post");$.get("/posts/get_data/profile_image/"+e,function(e){console.log(e),FB.api("me/picture?type=large",function(t){if(console.log(t.data.url),t&&!t.error){var a=$("<img>").attr("id","FB-image-game2").attr("src",t.data.url).css("width",e[0].profile_width).css("height",e[0].profile_height).css("left",e[0].profile_image_x).css("top",e[0].profile_image_y).css("position","absolute").css("z-index",100);$("#description").append(a)}})})}function shareThisPost(){FB.ui({method:"share",href:window.location.href},function(e){})}window.fbAsyncInit=function(){FB.init({appId:"1063610257017045",cookie:!0,xfbml:!0,version:"v2.5"})},function(e,t,a){var s,n=e.getElementsByTagName(t)[0];e.getElementById(a)||(s=e.createElement(t),s.id=a,s.src="//connect.facebook.net/en_US/sdk.js",n.parentNode.insertBefore(s,n))}(document,"script","facebook-jssdk"),"undefined"!=typeof FB&&null!=FB;var STATIC_URL="/static/",MEDIA_URL="uploads/";$(".loginBtn--facebook").click(function(){checkLoginState(),$(this).hasClass("fb-share")&&shareThisPost(),$(".loginBtn--facebook").text("Share with Facebook"),$(this).addClass("fb-share")}),$("#quizzes-game").click(function(){$("#quizzes").show(),$(this).hide()}),$(".show-more").click(function(e){e.preventDefault();var t=$(".show-more").data("posts-type"),a=$(".posts").length;$.get("/get-more-posts/"+t+"/"+a,function(e){var e=JSON.parse(e[0].posts);e.forEach(function(e){var t=$("<h2>").text(e.fields.title),a=$("<img>").addClass("banner-image").attr("src",STATIC_URL+MEDIA_URL+e.fields.image_banner).attr("alt",e.fields.image_banner),s=$("<a>").attr("href","/posts/"+e.fields.slug).append($("<div>").addClass("row link").append($("<p>").text("התחל משחק"))),n=$("<div>").addClass("col-sm-6 posts").append($("<div>").addClass("post").append(t).append(a).append(s));$("#main-posts").append(n)})})});